(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{683:function(t,e,n){"use strict";n.r(e);var a=n(21),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"upload-上传"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#upload-上传"}},[t._v("#")]),t._v(" Upload 上传")]),t._v(" "),n("p",[t._v("通过点击或者拖拽上传文件")]),t._v(" "),n("h2",{attrs:{id:"点击上传"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#点击上传"}},[t._v("#")]),t._v(" 点击上传")]),t._v(" "),n("p",[n("button",{staticClass:"xn-button xn-button-primary xn-button-left"},[n("svg",{staticClass:"xn-icon icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-shangchuan"}})]),n("span",[t._v("点击上传")])])]),t._v(" "),n("input",{staticClass:"upload",attrs:{type:"file",multiple:"multiple"}}),t._v(" "),n("p",[t._v("只能上传 jpg/png 文件，且不超过 500kb")]),t._v(" "),n("ul",[n("li",[n("p",[n("svg",{staticClass:"xn-icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-file"}})]),t._v("珠峰架构")]),t._v(" "),n("p",[n("svg",{staticClass:"xn-icon cha",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-cha"}})])])])]),t._v(" "),n("p",[t._v("通过 slot 你可以传入自定义的上传按钮类型和文字提示。可通过设置 limit 和 on-exceed 来限制上传文件的个数和定义超出限制时的行为。可通过设置 before-remove 来阻止文件移除操作。")]),t._v(" "),n("div",{staticClass:"language-hljs extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<xn-upload\n    class="upload-demo"\n    action="https://localhost:3000/upload"\n    :on-remove="handleRemove"\n    :beforeRemove="beforeRemove"\n    :multiple="true\n    :limit="3"\n    :on-exceed="handleExceed"\n    :file-list="fileList"\n>\n    <xn-button size="small" type="primary">点击上传</xn-button>\n    <div slot="tip">只能上传jpg/png文件，且不超过500kb</div>\n</xn-upload>\n<script>\nexport default {\n    data() {\n        return {\n            fileList: [\n                {\n                    name: "food.jpeg",\n                    url:\n                        "https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"\n                },\n                {\n                    name: "food2.jpeg",\n                    url:\n                        "https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"\n                }\n            ]\n        };\n    },\n    methods: {\n        handleRemove(file, fileList) {\n            console.log(file, fileList);\n        },\n        handleExceed(files, fileList) {\n            this.$message.warning(\n                `当前限制选择 3 个文件，本次选择了 ${\n                    files.length\n                } 个文件，共选择了 ${files.length + fileList.length} 个文件`\n            );\n        },\n        beforeRemove(file, fileList) {\n            return this.$confirm(`确定移除 ${file.name}？`);\n        }\n    }\n};\n<\/script>\n')])])]),n("p",[t._v("__\n显示代码")]),t._v(" "),n("h2",{attrs:{id:"用户头像上传"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#用户头像上传"}},[t._v("#")]),t._v(" 用户头像上传")]),t._v(" "),n("p",[t._v("__")]),t._v(" "),n("input",{staticClass:"upload",attrs:{type:"file"}}),t._v(" "),n("div",{staticClass:"language-hljs extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<xn-upload\n    class="avatar-uploader"\n    action="https://localhost:3000/upload"\n    :on-success="handleAvatarSuccess"\n    :beforeUpload="beforeAvatarUpload">\n    <img v-if="imageUrl" :src="imageUrl" class="avatar">\n    <i v-else class="el-icon-plus avatar-uploader-icon"></i>\n</xn-upload>\n<script>\nexport default {\n    data() {\n      return {\n        imageUrl: \'\'\n      };\n    },\n    methods: {\n      handleAvatarSuccess(res, file) {\n        this.imageUrl = URL.createObjectURL(file.raw);\n      },\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === \'image/jpeg\';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error(\'上传头像图片只能是 JPG 格式!\');\n        }\n        if (!isLt2M) {\n          this.$message.error(\'上传头像图片大小不能超过 2MB!\');\n        }\n        return isJPG && isLt2M;\n      }\n    }\n}\n<\/script>\n\n<style>\n  .avatar-uploader .xn-upload-handler {\n      width: 180px;\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .xn-upload-handler:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n')])])]),n("p",[t._v("__\n显示代码")]),t._v(" "),n("h2",{attrs:{id:"图片列表缩略图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#图片列表缩略图"}},[t._v("#")]),t._v(" 图片列表缩略图")]),t._v(" "),n("p",[n("button",{staticClass:"xn-button xn-button-primary xn-button-left",attrs:{size:"small"}},[n("span",[t._v("点击上传")])])]),t._v(" "),n("input",{staticClass:"upload",attrs:{type:"file"}}),t._v(" "),n("p",[t._v("只能上传 jpg/png 文件，且不超过 500kb")]),t._v(" "),n("ul",[n("li",[n("p",[n("img",{attrs:{src:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100",alt:""}})]),t._v(" "),n("p",[t._v("food.jpeg")]),t._v(" "),n("p",[n("svg",{staticClass:"xn-icon cha",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-cha"}})])])]),t._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100",alt:""}})]),t._v(" "),n("p",[t._v("food2.jpeg")]),t._v(" "),n("p",[n("svg",{staticClass:"xn-icon cha",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-cha"}})])])])]),t._v(" "),n("div",{staticClass:"language-hljs extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<xn-upload\n    class="upload-demo"\n    action="https://localhost:3000/upload"\n    :on-preview="handlePreview"\n    :on-remove="handleRemove"\n    :file-list="fileList"\n    list-type="picture">\n    <xn-button size="small" type="primary">点击上传</xn-button>\n    <div slot="tip">只能上传jpg/png文件，且不超过500kb</div>\n</xn-upload>\n<script>\nexport default {\n    data() {\n      return {\n        fileList: [{name: \'food.jpeg\', url: \'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100\'}, {name: \'food2.jpeg\', url: \'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100\'}]\n      };\n    },\n    methods: {\n      handleRemove(file, fileList) {\n        console.log(file, fileList);\n      },\n      handlePreview(file) {\n        console.log(file);\n      }\n    }\n}\n<\/script>\n')])])]),n("p",[t._v("__\n显示代码")]),t._v(" "),n("h2",{attrs:{id:"拖拽上传"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#拖拽上传"}},[t._v("#")]),t._v(" 拖拽上传")]),t._v(" "),n("p",[n("svg",{staticClass:"xn-icon icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-shangchuan"}})])]),t._v(" "),n("p",[t._v("将文件拖到此处，或 "),n("em",[t._v("点击上传")])]),t._v(" "),n("input",{staticClass:"upload",attrs:{type:"file",multiple:"multiple"}}),t._v(" "),n("p",[t._v("只能上传 jpg/png 文件，且不超过 500kb")]),t._v(" "),n("div",{staticClass:"language-hljs extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<xn-upload\n    class="upload-demo"\n    :drag="true"\n    action="https://localhost:3000/upload"\n    multiple>\n\n    <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>\n    <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>\n</xn-upload>\n')])])]),n("p",[t._v("__\n显示代码")]),t._v(" "),n("h2",{attrs:{id:"attribute"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#attribute"}},[t._v("#")]),t._v(" Attribute")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("参数")]),t._v(" "),n("th",[t._v("说明")]),t._v(" "),n("th",[t._v("类型")]),t._v(" "),n("th",[t._v("可选值")]),t._v(" "),n("th",[t._v("默认值")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("action")]),t._v(" "),n("td",[t._v("必选参数，上传的地址")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("multiple")]),t._v(" "),n("td",[t._v("是否支持多选文件")]),t._v(" "),n("td",[t._v("boolean")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("name")]),t._v(" "),n("td",[t._v("上传的文件字段名")]),t._v(" "),n("td",[t._v("string—file")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("drag")]),t._v(" "),n("td",[t._v("是否启用拖拽上传")]),t._v(" "),n("td",[t._v("boolean")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("false")])]),t._v(" "),n("tr",[n("td",[t._v("accept")]),t._v(" "),n("td",[t._v("接受上传的文件类型（thumbnail-mode 模式下此参数无效）")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("on-remove")]),t._v(" "),n("td",[t._v("文件列表移除文件时的钩子")]),t._v(" "),n("td",[t._v("function(file, fileList)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("on-success")]),t._v(" "),n("td",[t._v("文件上传成功时的钩子")]),t._v(" "),n("td",[t._v("function(response, file, fileList)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("on-error")]),t._v(" "),n("td",[t._v("文件上传失败时的钩子")]),t._v(" "),n("td",[t._v("function(err, file, fileList)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("on-progress")]),t._v(" "),n("td",[t._v("文件上传时的钩子")]),t._v(" "),n("td",[t._v("function(event, file, fileList)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("on-change")]),t._v(" "),n("td",[t._v("文件状态改变时的钩子，添加文件、上传成功和上传失败时都会被调用")]),t._v(" "),n("td",[t._v("function(file, fileList)—")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("before-upload")]),t._v(" "),n("td",[t._v("上传文件之前的钩子，参数为上传的文件，若返回 false 或者返回 Promise 且被 reject，则停止上传。")]),t._v(" "),n("td",[t._v("function(file)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("before-remove")]),t._v(" "),n("td",[t._v("删除文件之前的钩子，参数为上传的文件和文件列表，若返回 false 或者返回 Promise 且被 reject，则停止删除。")]),t._v(" "),n("td",[t._v("function(file, fileList)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("list-type")]),t._v(" "),n("td",[t._v("文件列表的类型")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("text/picture")]),t._v(" "),n("td",[t._v("text")])]),t._v(" "),n("tr",[n("td",[t._v("file-list")]),t._v(" "),n("td",[t._v("上传的文件列表, 例如: [{name: 'food.jpg', url: 'https://xxx.cdn.com/xxx.jpg'}]")]),t._v(" "),n("td",[t._v("array")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("[]")])]),t._v(" "),n("tr",[n("td",[t._v("http-request")]),t._v(" "),n("td",[t._v("覆盖默认的上传行为，可以自定义上传的实现")]),t._v(" "),n("td",[t._v("function")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("limit")]),t._v(" "),n("td",[t._v("最大允许上传个数")]),t._v(" "),n("td",[t._v("number")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("—")])]),t._v(" "),n("tr",[n("td",[t._v("on-exceed")]),t._v(" "),n("td",[t._v("文件超出个数限制时的钩子")]),t._v(" "),n("td",[t._v("function(files, fileList)")]),t._v(" "),n("td",[t._v("—")]),t._v(" "),n("td",[t._v("-")])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);